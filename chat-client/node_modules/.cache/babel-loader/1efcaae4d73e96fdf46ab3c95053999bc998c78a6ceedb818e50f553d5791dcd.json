{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Documents\\\\projects\\\\suxch\\\\chat-client\\\\src\\\\components\\\\Chat\\\\ChatWindow.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport './ChatWindow.css';\nimport MessageList from './MessageList';\nimport MessageInput from './MessageInput';\nimport UploadedFiles from './UploadedFiles';\nimport { FaPaperclip } from 'react-icons/fa';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SOCKET_SERVER_URL = 'http://localhost:8080/chat';\nconst ChatWindow = () => {\n  _s();\n  const {\n    userId,\n    receiverId\n  } = useParams();\n  const history = useHistory();\n  const [uploadedFiles, setUploadedFiles] = useState([]);\n  const [socket, setSocket] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [clientId, setClientId] = useState(null);\n  const [connectionStatus, setConnectionStatus] = useState('connecting');\n\n  // Initialize socket connection\n  const initSocket = useCallback(() => {\n    const token = localStorage.getItem('token');\n    const storedUserId = localStorage.getItem('userId');\n    if (!token || !storedUserId || storedUserId !== userId) {\n      history.push('/login');\n      return null;\n    }\n\n    // Reuse existing socket if available\n    if (window.socket && window.socket.connected) {\n      setSocket(window.socket);\n      setClientId(window.socket.id || null);\n      return window.socket;\n    }\n    const socketOptions = {\n      path: '/chat/socket.io',\n      auth: {\n        token: `Bearer ${token}`\n      },\n      query: {\n        userId\n      },\n      transports: ['websocket'],\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000\n    };\n    const newSocket = io(SOCKET_SERVER_URL, socketOptions);\n    newSocket.on('connect', () => {\n      console.log('Connected with ID:', newSocket.id);\n      setClientId(newSocket.id || null);\n      setConnectionStatus('connected');\n      if (receiverId) {\n        newSocket.emit('join_conversation', {\n          userId,\n          receiverId\n        });\n      }\n    });\n    newSocket.on('disconnect', () => {\n      setConnectionStatus('disconnected');\n    });\n    newSocket.on('connect_error', err => {\n      console.error('Connection error:', err);\n      if (err.message.includes('auth')) {\n        localStorage.clear();\n        history.pus('/login');\n      }\n    });\n    newSocket.on('new_message', message => {\n      setMessages(prev => [...prev, message]);\n    });\n    newSocket.on('file-sent', fileMessage => {\n      setMessages(prev => [...prev, fileMessage]);\n    });\n\n    // Store socket globally\n    window.socket = newSocket;\n    setSocket(newSocket);\n    return newSocket;\n  }, [userId, receiverId, navigate]);\n  useEffect(() => {\n    const newSocket = initSocket();\n    return () => {\n      // Clean up listeners but keep the connection alive\n      newSocket === null || newSocket === void 0 ? void 0 : newSocket.off('connect');\n      newSocket === null || newSocket === void 0 ? void 0 : newSocket.off('disconnect');\n      newSocket === null || newSocket === void 0 ? void 0 : newSocket.off('connect_error');\n      newSocket === null || newSocket === void 0 ? void 0 : newSocket.off('new_message');\n      newSocket === null || newSocket === void 0 ? void 0 : newSocket.off('file-sent');\n    };\n  }, [initSocket]);\n  const handleFileUpload = event => {\n    var _event$target$files;\n    if ((_event$target$files = event.target.files) !== null && _event$target$files !== void 0 && _event$target$files[0] && socket) {\n      const file = event.target.files[0];\n      setUploadedFiles(prev => [...prev, file]);\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('senderId', userId !== null && userId !== void 0 ? userId : 'defaultUserId');\n      if (receiverId) {\n        formData.append('receiverId', receiverId);\n      }\n      socket.emit('fileUpload', formData, response => {\n        if (response.status !== 'success') {\n          console.error('File upload failed:', response.message);\n        }\n      });\n    }\n  };\n  const handleSendMessage = message => {\n    if (socket) {\n      const messageData = receiverId ? {\n        senderId: userId,\n        receiverId,\n        content: message\n      } : {\n        senderId: userId,\n        content: message\n      };\n      socket.emit('send_message', messageData, response => {\n        if (response.status !== 'success') {\n          console.error('Message sending failed:', response.message);\n        }\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Chat Room - User: \", localStorage.getItem('username')]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), clientId && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Connection ID: \", clientId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Status: \", connectionStatus]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-content\",\n      children: userId && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(MessageList, {\n          messages: messages,\n          currentUserId: userId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(UploadedFiles, {\n          files: uploadedFiles\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-input-area\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"file-upload\",\n            className: \"file-upload-icon\",\n            children: /*#__PURE__*/_jsxDEV(FaPaperclip, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"file-upload\",\n            type: \"file\",\n            style: {\n              display: 'none'\n            },\n            onChange: handleFileUpload\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(MessageInput, {\n            onSend: handleSendMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatWindow, \"H8f4Dj8FZEjJP8uJtNemf2XDMkU=\", false, function () {\n  return [useParams, useHistory];\n});\n_c = ChatWindow;\nexport default ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useHistory","MessageList","MessageInput","UploadedFiles","FaPaperclip","io","jsxDEV","_jsxDEV","Fragment","_Fragment","SOCKET_SERVER_URL","ChatWindow","_s","userId","receiverId","history","uploadedFiles","setUploadedFiles","socket","setSocket","messages","setMessages","clientId","setClientId","connectionStatus","setConnectionStatus","initSocket","token","localStorage","getItem","storedUserId","push","window","connected","id","socketOptions","path","auth","query","transports","reconnectionAttempts","reconnectionDelay","newSocket","on","console","log","emit","err","error","message","includes","clear","pus","prev","fileMessage","navigate","off","handleFileUpload","event","_event$target$files","target","files","file","formData","FormData","append","response","status","handleSendMessage","messageData","senderId","content","className","children","fileName","_jsxFileName","lineNumber","columnNumber","currentUserId","htmlFor","type","style","display","onChange","onSend","_c","$RefreshReg$"],"sources":["C:/Users/DELL/Documents/projects/suxch/chat-client/src/components/Chat/ChatWindow.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, useHistory} from 'react-router-dom';\nimport './ChatWindow.css';\nimport MessageList from './MessageList';\nimport MessageInput from './MessageInput';\nimport UploadedFiles from './UploadedFiles';\nimport { FaPaperclip } from 'react-icons/fa';\nimport io, { Socket, ManagerOptions, SocketOptions } from 'socket.io-client';\n\n\nconst SOCKET_SERVER_URL = 'http://localhost:8080/chat';\n\n\ninterface ChatParams {\n  userId: string;\n  receiverId?: string;\n  [key: string]: string | undefined;\n}\n\nconst ChatWindow: React.FC = () => {\n  const { userId, receiverId } = useParams<ChatParams>();\n  const history = useHistory();\n  const [uploadedFiles, setUploadedFiles] = useState<File[]>([]);\n  const [socket, setSocket] = useState<Socket | null>(null);\n  const [messages, setMessages] = useState<any[]>([]);\n  const [clientId, setClientId] = useState<string | null>(null);\n  const [connectionStatus, setConnectionStatus] = useState<'connecting' | 'connected' | 'disconnected'>('connecting');\n\n  // Initialize socket connection\n  const initSocket = useCallback(() => {\n    const token = localStorage.getItem('token');\n    const storedUserId = localStorage.getItem('userId');\n    \n    if (!token || !storedUserId || storedUserId !== userId) {\n      history.push('/login');\n      return null;\n    }\n\n    // Reuse existing socket if available\n    if (window.socket && window.socket.connected) {\n      setSocket(window.socket);\n      setClientId(window.socket.id || null);\n      return window.socket;\n    }\n\n    const socketOptions: Partial<ManagerOptions & SocketOptions> = {\n      path: '/chat/socket.io',\n      auth: { token: `Bearer ${token}` },\n      query: { userId },\n      transports: ['websocket'],\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000,\n    };\n\n    const newSocket = io(SOCKET_SERVER_URL, socketOptions);\n\n    newSocket.on('connect', () => {\n      console.log('Connected with ID:', newSocket.id);\n      setClientId(newSocket.id || null);\n      setConnectionStatus('connected');\n      \n      if (receiverId) {\n        newSocket.emit('join_conversation', { userId, receiverId });\n      }\n    });\n\n    newSocket.on('disconnect', () => {\n      setConnectionStatus('disconnected');\n    });\n\n    newSocket.on('connect_error', (err) => {\n      console.error('Connection error:', err);\n      if (err.message.includes('auth')) {\n        localStorage.clear();\n        history.pus('/login');\n      }\n    });\n\n    newSocket.on('new_message', (message) => {\n      setMessages(prev => [...prev, message]);\n    });\n\n    newSocket.on('file-sent', (fileMessage) => {\n      setMessages(prev => [...prev, fileMessage]);\n    });\n\n    // Store socket globally\n    window.socket = newSocket;\n    setSocket(newSocket);\n\n    return newSocket;\n  }, [userId, receiverId, navigate]);\n\n  useEffect(() => {\n    const newSocket = initSocket();\n\n    return () => {\n      // Clean up listeners but keep the connection alive\n      newSocket?.off('connect');\n      newSocket?.off('disconnect');\n      newSocket?.off('connect_error');\n      newSocket?.off('new_message');\n      newSocket?.off('file-sent');\n    };\n  }, [initSocket]);\n\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files?.[0] && socket) {\n      const file = event.target.files[0];\n      setUploadedFiles(prev => [...prev, file]);\n\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('senderId', userId ?? 'defaultUserId');\n      if (receiverId) {\n        formData.append('receiverId', receiverId);\n      }\n\n      socket.emit('fileUpload', formData, (response: any) => {\n        if (response.status !== 'success') {\n          console.error('File upload failed:', response.message);\n        }\n      });\n    }\n  };\n\n  const handleSendMessage = (message: string) => {\n    if (socket) {\n      const messageData = receiverId \n        ? { senderId: userId, receiverId, content: message }\n        : { senderId: userId, content: message };\n\n      socket.emit('send_message', messageData, (response: any) => {\n        if (response.status !== 'success') {\n          console.error('Message sending failed:', response.message);\n        }\n      });\n    }\n  };\n\n  return (\n    <div className=\"chat-container\">\n      <div className=\"chat-header\">\n        <h1>Chat Room - User: {localStorage.getItem('username')}</h1>\n        {clientId && (\n          <div>\n            <p>Connection ID: {clientId}</p>\n            <p>Status: {connectionStatus}</p>\n          </div>\n        )}\n      </div>\n      <div className=\"chat-content\">\n        {userId && (\n          <>\n            <MessageList messages={messages} currentUserId={userId} />\n            <UploadedFiles files={uploadedFiles} />\n            <div className=\"chat-input-area\">\n              <label htmlFor=\"file-upload\" className=\"file-upload-icon\">\n                <FaPaperclip />\n              </label>\n              <input\n                id=\"file-upload\"\n                type=\"file\"\n                style={{ display: 'none' }}\n                onChange={handleFileUpload}\n              />\n              <MessageInput onSend={handleSendMessage} />\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ChatWindow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}